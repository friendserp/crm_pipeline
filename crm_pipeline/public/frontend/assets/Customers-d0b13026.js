import{a5 as S,r as u,o as F,a as n,b as t,F as U,f as V,e as g,a4 as v,J as a,a2 as w,a3 as l,aW as E,g as d,t as i,n as T}from"./index-07f63b4e.js";const P={class:"min-h-screen bg-[#233d48] py-6 px-4"},A={class:"max-w-6xl mx-auto"},D={class:"flex justify-between items-center mb-8"},M={key:0,class:"flex justify-center items-center py-12"},R={key:1,class:"bg-[#2a4a58] rounded-lg shadow-xl border border-[#2a4a58] overflow-hidden"},j={class:"overflow-x-auto"},O={class:"w-full"},B=["onClick"],L={class:"py-4 px-6 text-white font-medium"},$={class:"py-4 px-6 text-gray-300"},J={class:"py-4 px-6 text-gray-300"},G={class:"py-4 px-6"},I={class:"py-4 px-6 text-gray-300"},X={class:"py-4 px-6 text-gray-300"},z={key:0,class:"text-center py-12"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},q={class:"mt-4"},H={class:"mt-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"mt-6"},Y={class:"mt-6"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"mt-4 flex items-center"},re={__name:"Customers",setup(te){const k=S(),m=u([]),p=u(!1),c=u(!1),o=u({title:"No title",first_name:"",last_name:"",company_name:"",phone_number:"",email:"",lead_source:"",street1:"",street2:"",city:"",state:"",country:"Ethiopia",pincode:"",same_as_property:!1,customer_name:"",customer_group:"Demo Customer Group",customer_type:"Individual",tax_id:"",territory:"",website:"",mobile_no:"",disabled:0}),y=async()=>{p.value=!0;try{const r=await fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":await b()},body:JSON.stringify({doctype:"Customer",fields:["*"],limit:100,order_by:"modified desc"})});if(r.ok){const e=await r.json();m.value=e.message||[]}else console.error("Failed to fetch customers")}catch(r){console.error("Error fetching customers:",r)}finally{p.value=!1}},b=async()=>{try{return(await(await fetch("/api/method/frappe.csrf_token.get_csrf_token")).json()).message.csrf_token}catch(r){return console.error("Error getting CSRF token:",r),""}},C=async()=>{try{const r={doctype:"Customer",customer_name:`${o.value.first_name} ${o.value.last_name}`||o.value.company_name||"Unnamed Customer",customer_group:o.value.customer_group,customer_type:o.value.customer_type,email_id:o.value.email,mobile_no:o.value.mobile_no,tax_id:o.value.tax_id,territory:o.value.country,website:o.value.website,disabled:o.value.disabled},e=await fetch("/api/resource/Customer",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":await b()},body:JSON.stringify(r)});if(!e.ok){console.error("Failed to save customer"),alert("Failed to save customer. Please try again.");return}const x=(await e.json()).data.name,N={doctype:"Address",address_title:r.customer_name,address_type:"Billing",address_line1:o.value.street1,address_line2:o.value.street2,city:o.value.city,state:o.value.state,country:o.value.country,pincode:o.value.pincode,phone:o.value.phone_number,email_id:o.value.email,links:[{link_doctype:"Customer",link_name:x,link_title:r.customer_name}]};if(!(await fetch("/api/resource/Address",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":await b()},body:JSON.stringify(N)})).ok){console.error("Failed to save address"),alert("Failed to save address. Please try again.");return}await y(),f()}catch(r){console.error("Error saving customer or address:",r),alert("Error saving customer or address. Please try again.")}},_=r=>{k.push(`/customers/${r.name}`)},f=()=>{c.value=!1,o.value={title:"No title",first_name:"",last_name:"",company_name:"",phone_number:"",email:"",lead_source:"",street1:"",street2:"",city:"",state:"",country:"Ethiopia",pincode:"",same_as_property:!1,customer_name:"",customer_group:"Demo Customer Group",customer_type:"Individual",tax_id:"",territory:"",website:"",mobile_no:"",disabled:0}},h=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return F(()=>{y()}),(r,e)=>(d(),n("div",P,[t("div",A,[t("div",D,[e[16]||(e[16]=t("div",null,[t("h1",{class:"text-2xl font-bold text-white"},"Clients"),t("p",{class:"text-gray-300"},"Manage your clients database")],-1)),t("button",{onClick:e[0]||(e[0]=s=>c.value=!0),class:"px-4 py-2 border border-[#8acc33] text-[#8acc33] bg-[#233d48] hover:bg-[#2a4a58] rounded-md font-medium transition-colors duration-200"}," Add Client ")]),p.value?(d(),n("div",M,[...e[17]||(e[17]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8acc33]"},null,-1)])])):(d(),n("div",R,[t("div",j,[t("table",O,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"border-b border-[#2a4a58] bg-[#233d48]"},[t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Client Name"),t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Client Group"),t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Type"),t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Status"),t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Email"),t("th",{class:"text-left py-4 px-6 text-gray-300 font-medium"},"Last Modified")])],-1)),t("tbody",null,[(d(!0),n(U,null,V(m.value,s=>(d(),n("tr",{key:s.name,onClick:x=>_(s),class:"border-b border-[#2a4a58] hover:bg-[#233d48] transition-colors duration-200 cursor-pointer"},[t("td",L,i(s.customer_name||"N/A"),1),t("td",$,i(s.customer_group||"N/A"),1),t("td",J,i(s.customer_type||"N/A"),1),t("td",G,[t("span",{class:T([s.disabled?"bg-red-500":"bg-[#8acc33]","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white"])},i(s.disabled?"Disabled":"Active"),3)]),t("td",I,i(s.email_id||"N/A"),1),t("td",X,i(h(s.modified)),1)],8,B))),128))])])]),m.value.length===0?(d(),n("div",z,[...e[19]||(e[19]=[t("p",{class:"text-gray-400"},"No customers found",-1)])])):g("",!0)])),c.value?(d(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:f},[t("div",{class:"bg-[#233d48] rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-[#2a4a58]",onClick:e[15]||(e[15]=v(()=>{},["stop"]))},[e[43]||(e[43]=t("div",{class:"p-6 border-b border-[#2a4a58] bg-[#2a4a58]"},[t("h3",{class:"text-xl font-semibold text-white"}," Add New Customer ")],-1)),t("form",{onSubmit:v(C,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[25]||(e[25]=t("h4",{class:"text-lg font-medium text-gray-300 mb-4"},"Primary Contact Details",-1)),e[26]||(e[26]=t("p",{class:"text-sm text-gray-400 mb-4"},"Provide the main point of contact to ensure smooth communication and reliable client records.",-1)),t("div",W,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Title",-1)),a(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.title=s),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},[...e[20]||(e[20]=[t("option",{value:"No title"},"No title",-1),t("option",{value:"Mr"},"Mr",-1),t("option",{value:"Mrs"},"Mrs",-1)])],512),[[w,o.value.title]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"First Name",-1)),a(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.first_name=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.first_name]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Last Name",-1)),a(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.last_name=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.last_name]])])]),t("div",q,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Company Name",-1)),a(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.company_name=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.company_name]])])]),t("div",H,[e[29]||(e[29]=t("h4",{class:"text-lg font-medium text-gray-300 mb-4"},"Communication",-1)),t("div",K,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Phone Number",-1)),a(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.phone_number=s),type:"tel",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.phone_number]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Email",-1)),a(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.email=s),type:"email",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.email]])])])]),t("div",Q,[e[31]||(e[31]=t("h4",{class:"text-lg font-medium text-green-400 mb-4"},"Communication Settings",-1)),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Lead Information",-1)),a(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.lead_source=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.lead_source]])])]),t("div",Y,[e[40]||(e[40]=t("h4",{class:"text-lg font-medium text-gray-300 mb-4"},"Property Address",-1)),e[41]||(e[41]=t("p",{class:"text-sm text-gray-400 mb-4"},"Enter the primary service address, billing address, or any additional locations where services may take place.",-1)),t("div",Z,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Street 1",-1)),a(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.street1=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.street1]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Street 2",-1)),a(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.street2=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.street2]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"City",-1)),a(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.value.city=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.city]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Province",-1)),a(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.state=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.state]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Country",-1)),a(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.country=s),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},[...e[36]||(e[36]=[t("option",{value:"Ethiopia"},"Ethiopia",-1)])],512),[[w,o.value.country]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Postal Code",-1)),a(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.pincode=s),type:"text",class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,512),[[l,o.value.pincode]])])]),t("div",ee,[a(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.same_as_property=s),type:"checkbox",class:"h-4 w-4 text-[#8acc33] bg-[#233d48] border-[#2a4a58] rounded focus:ring-[#8acc33]"},null,512),[[E,o.value.same_as_property]]),e[39]||(e[39]=t("label",{class:"ml-2 text-sm text-green-400"},"Billing address is the same as property address",-1))])]),t("div",{class:"flex justify-end space-x-3 pt-6 border-t border-[#2a4a58]"},[t("button",{type:"button",onClick:f,class:"px-6 py-2 border border-[#8acc33] text-[#8acc33] bg-[#233d48] hover:bg-[#2a4a58] rounded-md font-medium transition-colors duration-200"}," Cancel "),e[42]||(e[42]=t("button",{type:"submit",class:"px-6 py-2 bg-[#8acc33] text-white rounded-md font-medium transition-colors duration-200"}," Save ",-1))])],32)])])):g("",!0)])]))}};export{re as default};
//# sourceMappingURL=Customers-d0b13026.js.map
