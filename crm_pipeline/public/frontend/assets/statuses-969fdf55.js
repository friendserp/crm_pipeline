import{c as R,g as m,a as g,G as z,H as k,b as N,L as C,O as d,t as A,$ as D,F as I,f as V,n as $,e as F,a_ as O,l as p,aS as S,a0 as E,aY as G}from"./index-07f63b4e.js";import{b as L,p as w}from"./UserAvatar-7e2b021e.js";import{I as H}from"./modals-49388916.js";const Y={class:"flex items-center gap-2 text-base"},_={class:"truncate"},K={__name:"MultipleAvatar",props:{avatars:{type:Array,default:[]},size:{type:String,default:"md"}},setup(t){const l=t,f=R(()=>[...l.avatars].reverse());return(v,y)=>{var i,c,u;return(i=t.avatars)!=null&&i.length?(m(),g("div",{key:0,class:$(["mr-1.5 flex cursor-pointer items-center",[((c=t.avatars)==null?void 0:c.length)>1?"flex-row-reverse":"truncate [&>div]:truncate"]])},[((u=t.avatars)==null?void 0:u.length)==1?(m(),z(d(D),{key:0,text:t.avatars[0].name},{default:k(()=>[N("div",Y,[C(d(L),{shape:"circle",image:t.avatars[0].image,label:t.avatars[0].label,size:t.size},null,8,["image","label","size"]),N("div",_,A(t.avatars[0].label),1)])]),_:1},8,["text"])):(m(!0),g(I,{key:1},V(f.value,n=>(m(),z(d(D),{text:n.name,key:n.name},{default:k(()=>[C(d(L),{class:"user-avatar -mr-1.5 transform ring-2 ring-outline-white transition hover:z-10 hover:scale-110",shape:"circle",image:n.image,label:n.label,size:t.size,"data-name":n.name},null,8,["image","label","size","data-name"])]),_:2},1032,["text"]))),128))],2)):F("",!0)}}},P=O("crm-statuses",()=>{let t=p({}),l=p({}),f=p({});const v=S({doctype:"CRM Lead Status",fields:["name","color","position"],orderBy:"position asc",cache:"lead-statuses",initialData:[],auto:!0,transform(e){for(let a of e)a.color=w(a.color),t[a.name]=a;return e}}),y=S({doctype:"CRM Deal Status",fields:["name","color","position","type"],orderBy:"position asc",cache:"deal-statuses",initialData:[],auto:!0,transform(e){for(let a of e)a.color=w(a.color),l[a.name]=a;return e}}),i=S({doctype:"CRM Communication Status",fields:["name"],cache:"communication-statuses",initialData:[],auto:!0,transform(e){for(let a of e)f[a.name]=a;return e}});function c(e){return e||(e=v.data[0].name),t[e]}function u(e){return e||(e=y.data[0].name),l[e]}function n(e){return e||(e=i.data[0].name),i[e]}function M(e,a=[],h=null){var x,B;let o=e=="deal"?l:t;a!=null&&a.length&&(o=a.reduce((s,r)=>(s[r]=o[r],s),{}));let b=[];for(const s in o)b.push({label:(x=o[s])==null?void 0:x.name,value:(B=o[s])==null?void 0:B.name,icon:()=>{var r;return E(H,{class:(r=o[s])==null?void 0:r.color})},onClick:async()=>{var r;await(h==null?void 0:h((r=o[s])==null?void 0:r.name)),G("status_changed",{doctype:e,status:s})}});return b}return{leadStatuses:v,dealStatuses:y,communicationStatuses:i,getLeadStatus:c,getDealStatus:u,getCommunicationStatus:n,statusOptions:M}});export{K as _,P as s};
//# sourceMappingURL=statuses-969fdf55.js.map
