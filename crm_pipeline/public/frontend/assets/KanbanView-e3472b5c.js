import{_ as G,g as i,a as u,b as a,M as D,N as H,c as x,V as K,G as b,H as c,L as s,n as B,O as m,F as E,f as j,aZ as q,t as h,a9 as J,I,x as y,S as R,T as z,e as v,a4 as Q}from"./index-07f63b4e.js";import{_ as U}from"./Link-9533fd53.js";import{I as F}from"./modals-49388916.js";import{j as w,p as S,D as W,k as A}from"./UserAvatar-7e2b021e.js";import{D as O}from"./settings-dc117b2e.js";const X={},Y={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ee(d,_){return i(),u("svg",Y,[..._[0]||(_[0]=[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.00915 1.67113C6.43756 0.996093 8.0523 0.824124 9.59083 1.18318L9.47719 1.67009L9.59083 1.18318C11.1294 1.54222 12.5012 2.41118 13.4833 3.64873L13.4833 3.64875C14.4653 4.8863 14.9999 6.41969 15 7.99959V7.99961V8.64961C15 9.29937 14.7419 9.92256 14.2824 10.382C13.8229 10.8415 13.1998 11.0996 12.55 11.0996C11.9002 11.0996 11.2771 10.8415 10.8176 10.382C10.6732 10.2376 10.5487 10.077 10.4458 9.90455C9.87852 10.6319 8.99387 11.0996 8.00001 11.0996C6.28792 11.0996 4.90001 9.71167 4.90001 7.99961C4.90001 6.28752 6.28792 4.8996 8.00001 4.8996C8.81015 4.8996 9.54773 5.21039 10.1 5.71924V5.3996C10.1 5.12346 10.3239 4.8996 10.6 4.8996C10.8761 4.8996 11.1 5.12346 11.1 5.3996V7.99961V8.64961C11.1 9.03414 11.2528 9.40298 11.5247 9.67491C11.7966 9.94684 12.1654 10.0996 12.55 10.0996C12.9345 10.0996 13.3034 9.94684 13.5753 9.67491C13.8472 9.40298 14 9.03414 14 8.64961V7.99964C14 7.99963 14 7.99962 14 7.99961C13.9999 6.64545 13.5417 5.33113 12.7 4.27036C11.8582 3.20959 10.6823 2.46476 9.36356 2.15701L9.477 1.67093L9.36356 2.15701C8.04482 1.84925 6.66077 1.99665 5.43641 2.57525L5.24134 2.16246L5.43641 2.57525C4.21207 3.15384 3.21944 4.12961 2.61996 5.34387C2.02048 6.55813 1.84939 7.93946 2.13451 9.26331C2.41962 10.5871 3.14418 11.7756 4.19038 12.6354C5.23657 13.4952 6.54286 13.9758 7.89687 13.9991C9.25083 14.0224 10.5729 13.587 11.648 12.7636C11.8673 12.5958 12.1811 12.6374 12.349 12.8566C12.5169 13.0759 12.4752 13.3897 12.256 13.5576C11.0017 14.5181 9.45929 15.0261 7.87968 14.999C6.30002 14.9718 4.77601 14.4111 3.55545 13.408L3.55543 13.408C2.33489 12.4048 1.48956 11.0183 1.15692 9.47385C0.824284 7.92937 1.02389 6.31782 1.72329 4.90118L2.16883 5.12114L1.72329 4.90117C2.42268 3.48454 3.58074 2.34615 5.00915 1.67113ZM10.1 7.99961C10.1 6.83981 9.15978 5.8996 8.00001 5.8996C6.84021 5.8996 5.90001 6.8398 5.90001 7.99961C5.90001 9.15939 6.84021 10.0996 8.00001 10.0996C9.15978 10.0996 10.1 9.15939 10.1 7.99961Z",fill:"currentColor"},null,-1)])])}const we=G(X,[["render",ee]]),te={class:"flex overflow-x-auto h-full"},oe={key:0,class:"flex flex-col gap-2.5 min-w-72 w-72 hover:bg-surface-gray-2 rounded-lg p-2.5"},le={class:"flex gap-2 items-center group justify-between"},ne={class:"flex items-center text-base"},ae={class:"flex flex-col gap-3 px-3 py-2.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},se={class:"flex gap-1"},ie={class:"flex flex-row-reverse"},re={class:"text-ink-gray-9"},ue={class:"flex"},ce={class:"overflow-y-auto flex flex-col gap-2 h-full"},me={class:"h-5 flex items-center"},de={key:0},fe={key:1,class:"text-ink-gray-4"},pe={class:"flex flex-col gap-3.5"},Ce={key:0,class:"truncate"},ve={class:"flex gap-2 items-center justify-between"},_e={key:0,class:"flex items-center justify-center"},ge={key:1,class:"shrink-0 min-w-64"},Le={__name:"KanbanView",props:D({options:{type:Object,default:()=>({getRoute:null,onClick:null,onNewClick:null})}},{modelValue:{},modelModifiers:{}}),emits:D(["update","loadMore"],["update:modelValue"]),setup(d,{emit:_}){const L=_,g=H(d,"modelValue"),k=x(()=>{var e,l;return(l=(e=g.value)==null?void 0:e.data)==null?void 0:l.title_field}),f=x(()=>{var n,o;if(!((o=(n=g.value)==null?void 0:n.data)!=null&&o.data)||g.value.data.view_type!="kanban")return[];let e=g.value.data.data;return e.some(t=>{var r;return(r=t.column)==null?void 0:r.color})||e.forEach((t,r)=>{t.column.color=w[r%w.length]}),e}),V=x(()=>f.value.filter(e=>e.column.delete).map(e=>({label:e.column.name,value:e.column.name})));function P(e){return[{group:__("Options"),hideLabel:!0,items:[{label:__("Delete"),icon:"trash-2",onClick:()=>{e.column.delete=!0,p()}}]}]}function T(e){let l=f.value.find(n=>n.column.name==e.value);l.column.delete=!1,p()}function p(e){var N,M,$;let l=(N=e==null?void 0:e.to)==null?void 0:N.dataset.column,n=(M=e==null?void 0:e.from)==null?void 0:M.dataset.column,o=($=e==null?void 0:e.item)==null?void 0:$.dataset.name,t=[];f.value.forEach(C=>{C.column.order=C.data.map(Z=>Z.name),C.column.page_length&&delete C.column.page_length,t.push(C.column)});let r={kanban_columns:t};l!=n&&(r={item:o,to:l,kanban_columns:t}),L("update",r)}return(e,l)=>{const n=K("Button");return i(),u("div",te,[f.value?(i(),b(m(O),{key:0,list:f.value,"item-key":"column",onEnd:p,delay:m(A)()?200:0,class:"flex sm:mx-2.5 mx-2 pb-3.5"},{item:c(({element:o})=>[o.column.delete?v("",!0):(i(),u("div",oe,[a("div",le,[a("div",ne,[s(m(q),null,{target:c(({togglePopover:t})=>[s(n,{variant:"ghost",size:"sm",class:"hover:!bg-surface-gray-2",onClick:t},{default:c(()=>[s(F,{class:B(m(S)(o.column.color))},null,8,["class"])]),_:2},1032,["onClick"])]),body:c(()=>[a("div",ae,[a("div",se,[(i(!0),u(E,null,j(m(w),t=>(i(),b(n,{variant:"ghost",key:t,onClick:()=>o.column.color=t},{default:c(()=>[s(F,{class:B(m(S)(t))},null,8,["class"])]),_:2},1032,["onClick"]))),128))]),a("div",ie,[s(n,{variant:"solid",label:e.__("Apply"),onClick:p},null,8,["label"])])])]),_:2},1024),a("div",re,h(o.column.name),1)]),a("div",ue,[s(m(W),{options:P(o)},{default:c(()=>[s(n,{class:"opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity",icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"]),s(n,{icon:"plus",variant:"ghost",onClick:t=>d.options.onNewClick(o)},null,8,["onClick"])])]),a("div",ce,[s(m(O),{list:o.data,group:"fields","item-key":"name",class:"flex flex-col gap-3.5 flex-1",onEnd:p,delay:m(A)()?200:0,"data-column":o.column.name},{item:c(({element:t})=>[(i(),b(J(d.options.getRoute?"router-link":"div"),I({class:"pt-3 px-3.5 pb-2.5 rounded-lg border bg-surface-white text-base flex flex-col text-ink-gray-9","data-name":t.name},{to:d.options.getRoute?d.options.getRoute(t):void 0,onClick:d.options.onClick?()=>d.options.onClick(t):void 0}),{default:c(()=>[y(e.$slots,"title",R(z({fields:t,titleField:k.value,itemName:t.name})),()=>[a("div",me,[t[k.value]?(i(),u("div",de,h(t[k.value]),1)):(i(),u("div",fe,h(e.__("No Title")),1))])]),l[3]||(l[3]=a("div",{class:"border-b h-px my-2.5"},null,-1)),a("div",pe,[(i(!0),u(E,null,j(o.fields,r=>y(e.$slots,"fields",I({key:r,ref_for:!0},{fields:t,fieldName:r,itemName:t.name}),()=>[t[r]?(i(),u("div",Ce,h(t[r]),1)):v("",!0)])),128))]),l[4]||(l[4]=a("div",{class:"border-b h-px mt-2.5 mb-2"},null,-1)),y(e.$slots,"actions",R(z({itemName:t.name})),()=>[a("div",ve,[l[2]||(l[2]=a("div",null,null,-1)),s(n,{icon:"plus",variant:"ghost",onClick:l[0]||(l[0]=Q(()=>{},["stop","prevent"]))})])])]),_:2},1040,["data-name"]))]),_:2},1032,["list","delay","data-column"]),o.column.count<o.column.all_count?(i(),u("div",_e,[s(n,{label:e.__("Load More"),onClick:t=>L("loadMore",o.column.name)},null,8,["label","onClick"])])):v("",!0)])]))]),_:3},8,["list","delay"])):v("",!0),V.value.length?(i(),u("div",ge,[s(U,{value:"",options:V.value,onChange:l[1]||(l[1]=o=>T(o))},{target:c(({togglePopover:o})=>[s(n,{class:"w-full mt-2.5 mb-1 mr-5",label:e.__("Add Column"),iconLeft:"plus",onClick:t=>o()},null,8,["label","onClick"])]),_:1},8,["options"])])):v("",!0)])}}};export{we as E,Le as _};
//# sourceMappingURL=KanbanView-e3472b5c.js.map
