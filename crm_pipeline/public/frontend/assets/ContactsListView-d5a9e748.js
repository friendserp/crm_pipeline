import{J as g,aU as W,K as h,j as x,aR as q,k as N,r as T,U as V,l as s,m,I as n,D as u,L as r,F as $,B as I,C as c,p as w,q as p,Y as P,M as S,N as B,a4 as j}from"./index-d54876c1.js";import{H as L,_ as H}from"./ListBulkActions-c260ba88.js";import{P as J}from"./PhoneIcon-1fb4da28.js";import{_ as O,a as E,b as K,c as Y,d as G,e as Q}from"./DeleteLinkedDocModal-5c61d607.js";import{b as M,D as X}from"./UserAvatar-34c53d4c.js";import{_ as Z}from"./ListFooter-a1579762.js";const ee={key:0},te={key:1},se={key:2},oe=["onClick"],le={key:1},ae={key:2},ie=["onClick"],pe={__name:"ContactsListView",props:g({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:g(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(a,{expose:U,emit:A}){const d=A,v=W(),f=h(a,"modelValue"),k=h(a,"list"),F=x(()=>{var o,t;return!!((t=(o=k.value.params)==null?void 0:o.filters)!=null&&t._liked_by)}),{user:z}=q();function b(o){if(o)return JSON.parse(o).includes(z)}N(f,(o,t)=>{o!==t&&d("updatePageCount",o)});const y=T(null);return U({customListActions:x(()=>{var o;return(o=y.value)==null?void 0:o.customListActions})}),(o,t)=>{const C=V("Button"),D=V("FormControl");return s(),m($,null,[n(r(Q),{class:w(o.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:r(v).query.view,viewType:r(v).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name","onUpdate:selections":t[2]||(t[2]=e=>d("selectionsChanged",e))},{default:u(()=>[n(r(O),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:t[1]||(t[1]=e=>d("columnWidthUpdated"))},{default:u(()=>[(s(!0),m($,null,I(a.columns,e=>(s(),c(r(E),{key:e.key,item:e,onColumnWidthUpdated:i=>d("columnWidthUpdated",e)},{default:u(()=>[e.key=="_liked_by"?(s(),c(C,{key:0,variant:"ghosted",class:w(["!h-4",F.value?"fill-red-500":"fill-white"]),onClick:t[0]||(t[0]=()=>d("applyLikeFilter"))},{default:u(()=>[n(L,{class:"h-4 w-4"})]),_:1},8,["class"])):p("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),n(K,{class:"mx-3 sm:mx-5",rows:a.rows,doctype:"Contact"},{default:u(({idx:e,column:i,item:l})=>[n(r(Y),{item:l,align:i.align},{prefix:u(()=>[i.key==="full_name"?(s(),m("div",ee,[l.label?(s(),c(r(M),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="company_name"?(s(),m("div",te,[l.label?(s(),c(r(M),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):p("",!0)])):i.key==="mobile_no"?(s(),m("div",se,[n(J,{class:"h-4 w-4"})])):p("",!0)]),default:u(({label:R})=>[["modified","creation"].includes(i.key)?(s(),m("div",{key:0,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},[n(r(P),{text:l.label},{default:u(()=>[S("div",null,B(l.timeAgo),1)]),_:2},1032,["text"])],8,oe)):i.type==="Check"?(s(),m("div",le,[n(D,{type:"checkbox",modelValue:l,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):i.key==="_liked_by"?(s(),m("div",ae,[i.key=="_liked_by"?(s(),c(C,{key:0,variant:"ghosted",class:w(b(l)?"fill-red-500":"fill-white"),onClick:j(()=>d("likeDoc",{name:o.row.name,liked:b(l)}),["stop","prevent"])},{default:u(()=>[n(L,{class:"h-4 w-4"})]),_:1},8,["class","onClick"])):p("",!0)])):(s(),m("div",{key:3,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},B(R),9,ie))]),_:2},1032,["item","align"])]),_:1},8,["rows"]),n(r(G),null,{actions:u(({selections:e,unselectAll:i})=>[n(r(X),{options:y.value.bulkActions(e,i)},{default:u(()=>[n(C,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),f.value?(s(),c(r(Z),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:t[4]||(t[4]=e=>d("loadMore"))},null,8,["modelValue","options"])):p("",!0),n(H,{ref_key:"listBulkActionsRef",ref:y,modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{pe as _};
//# sourceMappingURL=ContactsListView-d5a9e748.js.map
