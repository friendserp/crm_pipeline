import{_ as k,a as d,b as t,t as a,e as u,F as f,f as b,n as v,aE as g,J as h,a3 as p,d as _,a4 as C,g as m,a2 as S}from"./index-07f63b4e.js";const D={name:"TimesheetsPage",data(){return{selectedPeriod:"Today",timePeriods:["Today","Week","Month"],currentUser:{},timesheets:[],tasks:[],customers:[],showTimerModal:!1,showCustomerDropdown:!1,timer:{startTime:null,displayTime:"0:00:00",startTimeDisplay:"",interval:null,isRunning:!1,activity_type:"Execution"},currentTimesheet:{name:null,start_date:this.getTodayDate(),end_date:this.getTodayDate(),customer:"",company:"Friends ERP",status:"Draft",time_logs:[]},hasChanges:!1,isSaving:!1,isSubmitting:!1}},computed:{totalHours(){return this.currentTimesheet.time_logs?this.currentTimesheet.time_logs.reduce((e,n)=>e+(parseFloat(n.hours)||0),0).toFixed(3):"0.00"},filteredCustomers(){if(!this.currentTimesheet.customer)return this.customers.slice(0,10);const s=this.currentTimesheet.customer.toLowerCase();return this.customers.filter(e=>e.customer_name.toLowerCase().includes(s)||e.email_id&&e.email_id.toLowerCase().includes(s)||e.mobile_no&&e.mobile_no.includes(s)).slice(0,10)}},async mounted(){await this.loadCurrentUser(),await this.loadTasks(),await this.loadCustomers(),await this.loadTimesheets(),this.initializeNewTimesheet()},methods:{getTodayDate(){return new Date().toISOString().split("T")[0]},async loadCurrentUser(){try{const s=await fetch("/api/method/frappe.auth.get_logged_user",{method:"GET",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()}});if(s.ok){const e=await s.json();this.currentUser=e.message}}catch(s){console.error("Error loading user:",s),this.currentUser={full_name:"Demo User",email:"user@example.com"}}},async loadCustomers(){try{const s=await fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doctype:"Customer",fields:["name","customer_name","email_id","mobile_no","customer_type","territory"],filters:[["disabled","=",0]],order_by:"customer_name asc",limit:200})});if(s.ok){const e=await s.json();this.customers=e.message||[]}else console.error("Failed to load customers")}catch(s){console.error("Error loading customers:",s)}},selectCustomer(s){this.currentTimesheet.customer=s.customer_name,this.showCustomerDropdown=!1,this.hasChanges=!0},async loadTasks(){try{const s=await fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doctype:"Task",fields:["name","subject","status","project","priority","exp_start_date","exp_end_date"],filters:[["status","not in",["Completed","Cancelled"]]],order_by:"modified desc",limit:100})});if(s.ok){const e=await s.json();this.tasks=e.message||[]}else console.error("Failed to load tasks")}catch(s){console.error("Error loading tasks:",s)}},filteredTasks(s){if(!s)return this.tasks.slice(0,10);const e=s.toLowerCase();return this.tasks.filter(n=>n.subject.toLowerCase().includes(e)||n.project&&n.project.toLowerCase().includes(e)).slice(0,10)},showTaskDropdown(s){this.currentTimesheet.time_logs[s].showTaskDropdown=!0},hideTaskDropdown(s){this.currentTimesheet.time_logs[s].showTaskDropdown=!1},selectTask(s,e){this.currentTimesheet.time_logs[s].task=e.name,this.currentTimesheet.time_logs[s].showTaskDropdown=!1,this.hasChanges=!0},async loadTimesheets(){try{let s={};if(this.selectedPeriod==="Today")s={start_date:[">=",this.getTodayDate()]};else if(this.selectedPeriod==="Week"){const n=new Date;n.setDate(n.getDate()-7),s={start_date:[">=",n.toISOString().split("T")[0]]}}const e=await fetch("/api/method/frappe.client.get_list",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doctype:"Timesheet",fields:["*"],filters:s,order_by:"creation desc"})});if(e.ok){const n=await e.json();this.timesheets=n.message}else throw new Error("Failed to load timesheets")}catch(s){console.error("Error loading timesheets:",s),this.showAlert("Error loading timesheets","red")}},initializeNewTimesheet(){this.currentTimesheet={name:null,start_date:this.getTodayDate(),end_date:this.getTodayDate(),customer:"",company:"Friends ERP",status:"Draft",time_logs:[this.createEmptyTimeLog()]},this.hasChanges=!1},createEmptyTimeLog(){const s=new Date;return{activity_type:"Execution",from_time:new Date(s.getTime()-60*60*1e3).toISOString().slice(0,16),to_time:s.toISOString().slice(0,16),task:"",hours:"1.000",is_billable:0,showTaskDropdown:!1}},addTimeLog(){this.currentTimesheet.time_logs.push(this.createEmptyTimeLog()),this.hasChanges=!0},removeTimeLog(s){this.currentTimesheet.time_logs.splice(s,1),this.hasChanges=!0},updateLogHours(s){const e=this.currentTimesheet.time_logs[s];if(e.from_time&&e.to_time){const n=new Date(e.from_time),r=(new Date(e.to_time)-n)/(1e3*60*60);e.hours=r.toFixed(6)}this.hasChanges=!0},createNewTimesheet(){this.initializeNewTimesheet()},viewTimesheet(s){this.currentTimesheet=JSON.parse(JSON.stringify(s)),this.currentTimesheet.time_logs=this.currentTimesheet.time_logs.map(e=>({...e,showTaskDropdown:!1})),this.hasChanges=!1},async saveTimesheet(){if(!this.isSaving){this.isSaving=!0;try{let s;const e={...this.currentTimesheet,time_logs:this.currentTimesheet.time_logs.map(n=>({activity_type:n.activity_type,from_time:n.from_time,to_time:n.to_time,task:n.task,hours:n.hours,is_billable:n.is_billable}))};if(this.currentTimesheet.name?s=await fetch("/api/method/frappe.client.save",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doc:e})}):s=await fetch("/api/method/frappe.client.insert",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doc:{doctype:"Timesheet",...e}})}),s.ok){const n=await s.json();this.currentTimesheet.name||(this.currentTimesheet.name=n.message.name),this.showAlert("Timesheet saved successfully","green"),this.hasChanges=!1,this.loadTimesheets()}else throw new Error("Failed to save timesheet")}catch(s){console.error("Error saving timesheet:",s),this.showAlert("Error saving timesheet","red")}finally{this.isSaving=!1}}},async submitTimesheet(){if(!this.isSubmitting){this.isSubmitting=!0;try{if((await fetch("/api/method/frappe.client.set_value",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({doctype:"Timesheet",name:this.currentTimesheet.name,fieldname:{status:"Submitted"}})})).ok)this.currentTimesheet.status="Submitted",this.hasChanges=!1,this.showAlert("Timesheet submitted successfully","green"),this.loadTimesheets();else throw new Error("Failed to submit timesheet")}catch(s){console.error("Error submitting timesheet:",s),this.showAlert("Error submitting timesheet","red")}finally{this.isSubmitting=!1}}},startTimer(){if(this.timer.isRunning)return;const s=new Date;this.timer.startTime=s,this.timer.startTimeDisplay=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),this.timer.isRunning=!0,this.showTimerModal=!0,this.timer.interval=setInterval(()=>{const n=new Date-this.timer.startTime,T=Math.floor(n/36e5),i=Math.floor(n%36e5/6e4),r=Math.floor(n%6e4/1e3);this.timer.displayTime=`${T}:${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},1e3)},stopTimerAndAddLog(){if(!this.timer.isRunning)return;this.timer.interval&&clearInterval(this.timer.interval);const s=new Date,e=s.toISOString().slice(0,16),n=this.timer.startTime.toISOString().slice(0,16),i=((s-this.timer.startTime)/(1e3*60*60)).toFixed(6);this.currentTimesheet.time_logs.push({activity_type:this.timer.activity_type,from_time:n,to_time:e,task:"",hours:i,is_billable:0,showTaskDropdown:!1}),this.timer.isRunning=!1,this.showTimerModal=!1,this.timer.displayTime="0:00:00",this.hasChanges=!0,this.showAlert("Time entry added from timer","green")},formatDate(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},statusColor(s){return{Draft:"text-yellow-400",Submitted:"text-green-400",Cancelled:"text-red-400"}[s]||"text-gray-400"},getCSRFToken(){const s=document.querySelector('meta[name="csrf-token"]');return s?s.getAttribute("content"):""},showAlert(s,e){const n=document.createElement("div");n.className=`fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg z-50 ${e==="green"?"bg-green-500 text-white":"bg-red-500 text-white"}`,n.textContent=s,document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},3e3)}}},F={class:"h-full bg-[#233d48] p-6"},R={class:"flex items-center space-x-2"},E={class:"font-bold"},M={class:"max-w-7xl mx-auto"},j={class:"mb-8"},N={class:"text-gray-300 text-lg"},L={class:"font-bold text-lg"},A={class:"bg-[#2a4a58] rounded-lg border border-[#2a4a58] p-4 mb-6"},U={class:"flex justify-between items-center"},P={class:"flex space-x-4 border-[#8acc33] border-b pb-2"},O=["onClick"],V={class:"flex space-x-3"},z={key:0,class:"bg-[#2a4a58] rounded-lg border border-[#2a4a58] p-6 mb-6"},H={class:"space-y-3"},B=["onClick"],I={class:"flex justify-between items-center"},J={class:"text-white font-semibold"},X={class:"text-gray-300 text-sm"},G={class:"text-gray-400 text-xs mt-1"},W={class:"text-right"},q={class:"text-[#8acc33] font-semibold"},K={class:"text-gray-400 text-sm"},Q={class:"bg-[#2a4a58] rounded-lg border border-[#2a4a58] p-6"},Y={class:"flex justify-between items-center mb-6"},Z={class:"text-xl font-semibold text-white"},$={class:"flex space-x-3"},ee=["disabled"],te={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},se=["disabled"],oe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ie={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},re={class:"relative"},ne={key:0,class:"absolute z-10 w-full mt-1 bg-[#233d48] border border-[#2a4a58] rounded-md shadow-lg max-h-60 overflow-y-auto"},ae=["onMousedown"],le={class:"font-medium"},de={class:"text-gray-400 text-xs"},me={key:0,class:"px-3 py-2 text-sm text-gray-400"},ce={class:"mb-6"},ue={class:"space-y-3"},he={class:"col-span-2"},ge=["onUpdate:modelValue","onChange"],pe={class:"col-span-3"},fe={class:"relative"},be=["onUpdate:modelValue","onFocus","onBlur"],ve={key:0,class:"absolute z-10 w-full mt-1 bg-[#233d48] border border-[#2a4a58] rounded-md shadow-lg max-h-60 overflow-y-auto"},Te=["onMousedown"],ye={class:"font-medium"},we={class:"text-gray-400 text-xs"},xe={key:0,class:"px-3 py-2 text-sm text-gray-400"},_e={class:"col-span-2"},ke=["onUpdate:modelValue","onChange"],Ce={class:"col-span-2"},Se=["onUpdate:modelValue","onChange"],De={class:"col-span-2 text-right"},Fe={class:"text-[#8acc33] font-semibold text-sm"},Re={class:"col-span-1 text-center"},Ee=["onClick"],Me={class:"bg-[#233d48] rounded-lg border border-[#2a4a58] p-6 mb-6"},je={class:"flex justify-between items-center"},Ne={class:"flex space-x-4"},Le=["disabled"],Ae={class:"text-right"},Ue={class:"text-lg font-semibold text-[#8acc33]"},Pe={class:"text-sm text-gray-300"},Oe={class:"p-6"},Ve={class:"text-4xl font-bold text-[#8acc33] mb-6 text-center"},ze={class:"grid grid-cols-2 gap-4 mb-6"},He={class:"text-white font-medium"},Be={class:"text-white font-medium"},Ie={class:"flex space-x-3"};function Je(s,e,n,T,i,r){var y,w,x;return m(),d("div",F,[i.timer.isRunning&&!i.showTimerModal?(m(),d("div",{key:0,class:"fixed top-4 right-4 bg-[#8acc33] text-white px-4 py-2 rounded-lg shadow-lg z-40 cursor-pointer",onClick:e[0]||(e[0]=o=>i.showTimerModal=!0)},[t("div",R,[e[20]||(e[20]=t("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1)),t("span",E,a(i.timer.displayTime),1),e[21]||(e[21]=t("span",{class:"text-sm"},"• Click to open",-1))])])):u("",!0),t("div",M,[t("div",j,[e[22]||(e[22]=t("p",{class:"bg-blue-500 text-white text-sm rounded-lg p-2 inline-block"},"Connect, Grow & Plus plan feature",-1)),e[23]||(e[23]=t("h1",{class:"text-3xl font-bold text-white mb-2 mt-4"},"Timesheets",-1)),t("div",N,[t("p",L,a(((y=i.currentUser)==null?void 0:y.full_name)||"Demo User"),1),t("p",null,a(((w=i.currentUser)==null?void 0:w.email)||"user@example.com"),1)])]),t("div",A,[t("div",U,[t("div",P,[(m(!0),d(f,null,b(i.timePeriods,o=>(m(),d("button",{key:o,class:v(["px-4 py-2 font-medium rounded-lg transition-colors duration-200",i.selectedPeriod===o?"bg-[#8acc33] text-white":"text-gray-300 hover:text-white"]),onClick:c=>{i.selectedPeriod=o,r.loadTimesheets()}},a(o),11,O))),128))]),t("div",V,[t("button",{onClick:e[1]||(e[1]=(...o)=>r.createNewTimesheet&&r.createNewTimesheet(...o)),class:"px-4 py-2 bg-[#8acc33] hover:bg-[#7abc22] text-white font-medium rounded-lg transition-colors duration-200"}," New Timesheet "),t("button",{onClick:e[2]||(e[2]=(...o)=>r.loadTimesheets&&r.loadTimesheets(...o)),class:"px-4 py-2 border border-[#8acc33] text-[#8acc33] bg-transparent hover:bg-[#2a4a58] font-medium rounded-lg transition-colors duration-200"}," Refresh ")])])]),i.timesheets.length>0?(m(),d("div",z,[e[25]||(e[25]=t("h3",{class:"text-xl font-semibold text-white mb-4"},"Existing Timesheets",-1)),t("div",H,[(m(!0),d(f,null,b(i.timesheets,o=>{var c;return m(),d("div",{key:o.name,class:"bg-[#233d48] rounded-lg p-4 border border-[#2a4a58] cursor-pointer hover:border-[#8acc33] transition-colors",onClick:l=>r.viewTimesheet(o)},[t("div",I,[t("div",null,[t("div",J,a(o.name),1),t("div",X,a(r.formatDate(o.start_date))+" - "+a(r.formatDate(o.end_date)),1),t("div",G,[e[24]||(e[24]=g(" Status: ",-1)),t("span",{class:v(r.statusColor(o.status))},a(o.status),3),g(" • Total Hours: "+a(o.total_hours)+" • Company: "+a(o.company),1)])]),t("div",W,[t("div",q,a(o.total_hours)+" hrs",1),t("div",K,a(((c=o.time_logs)==null?void 0:c.length)||0)+" entries",1)])])],8,B)}),128))])])):u("",!0),t("div",Q,[t("div",Y,[t("h3",Z,a(i.currentTimesheet.name||"New Timesheet"),1),t("div",$,[t("button",{onClick:e[3]||(e[3]=(...o)=>r.saveTimesheet&&r.saveTimesheet(...o)),disabled:!i.hasChanges||i.isSaving,class:v(["px-4 py-2 font-medium rounded-lg transition-colors duration-200 flex items-center",i.hasChanges&&!i.isSaving?"bg-[#8acc33] hover:bg-[#7abc22] text-white":"bg-gray-500 cursor-not-allowed text-gray-300"])},[i.isSaving?(m(),d("svg",te,[...e[26]||(e[26]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),g(" "+a(i.isSaving?"Saving...":i.currentTimesheet.name?"Update":"Save"),1)],10,ee),i.currentTimesheet.name&&i.currentTimesheet.status==="Draft"?(m(),d("button",{key:0,onClick:e[4]||(e[4]=(...o)=>r.submitTimesheet&&r.submitTimesheet(...o)),disabled:i.isSubmitting,class:v(["px-4 py-2 font-medium rounded-lg transition-colors duration-200 flex items-center",i.isSubmitting?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"])},[i.isSubmitting?(m(),d("svg",oe,[...e[27]||(e[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),g(" "+a(i.isSubmitting?"Submitting...":"Submit"),1)],10,se)):u("",!0)])]),t("div",ie,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Start Date",-1)),h(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=o=>i.currentTimesheet.start_date=o),onChange:e[6]||(e[6]=o=>i.hasChanges=!0),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,544),[[p,i.currentTimesheet.start_date]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"End Date",-1)),h(t("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=o=>i.currentTimesheet.end_date=o),onChange:e[8]||(e[8]=o=>i.hasChanges=!0),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white"},null,544),[[p,i.currentTimesheet.end_date]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Customer",-1)),t("div",re,[h(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=o=>i.currentTimesheet.customer=o),onInput:e[10]||(e[10]=o=>i.hasChanges=!0),onFocus:e[11]||(e[11]=o=>i.showCustomerDropdown=!0),onBlur:e[12]||(e[12]=o=>s.setTimeout(()=>{i.showCustomerDropdown=!1},200)),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white",placeholder:"Select customer"},null,544),[[p,i.currentTimesheet.customer]]),i.showCustomerDropdown?(m(),d("div",ne,[(m(!0),d(f,null,b(r.filteredCustomers,o=>(m(),d("div",{key:o.name,onMousedown:c=>r.selectCustomer(o),class:"px-3 py-2 text-sm text-white hover:bg-[#2a4a58] cursor-pointer border-b border-[#2a4a58] last:border-b-0"},[t("div",le,a(o.customer_name),1),t("div",de,a(o.email_id||"No email")+" • "+a(o.mobile_no||"No phone"),1)],40,ae))),128)),r.filteredCustomers.length===0?(m(),d("div",me," No customers found ")):u("",!0)])):u("",!0)])])]),t("div",ce,[e[33]||(e[33]=_('<h4 class="text-lg font-semibold text-white mb-4" data-v-7f1f7e60>Time Entries</h4><div class="grid grid-cols-12 gap-4 mb-4 px-4 text-sm font-medium text-gray-300" data-v-7f1f7e60><div class="col-span-2" data-v-7f1f7e60>Activity Type</div><div class="col-span-3" data-v-7f1f7e60>Task/Project</div><div class="col-span-2" data-v-7f1f7e60>From Time</div><div class="col-span-2" data-v-7f1f7e60>To Time</div><div class="col-span-2 text-right" data-v-7f1f7e60>Hours</div><div class="col-span-1" data-v-7f1f7e60>Actions</div></div>',2)),t("div",ue,[(m(!0),d(f,null,b(i.currentTimesheet.time_logs,(o,c)=>(m(),d("div",{key:c,class:"grid grid-cols-12 gap-4 items-center bg-[#233d48] rounded-lg p-4 border border-[#2a4a58]"},[t("div",he,[h(t("select",{"onUpdate:modelValue":l=>o.activity_type=l,onChange:l=>r.updateLogHours(c),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white text-sm"},[...e[31]||(e[31]=[_('<option value="Communication" data-v-7f1f7e60>Communication</option><option value="Execution" data-v-7f1f7e60>Execution</option><option value="Planning" data-v-7f1f7e60>Planning</option><option value="Research" data-v-7f1f7e60>Research</option><option value="Testing" data-v-7f1f7e60>Testing</option><option value="Training" data-v-7f1f7e60>Training</option>',6)])],40,ge),[[S,o.activity_type]])]),t("div",pe,[t("div",fe,[h(t("input",{type:"text","onUpdate:modelValue":l=>o.task=l,onInput:e[13]||(e[13]=l=>i.hasChanges=!0),onFocus:l=>r.showTaskDropdown(c),onBlur:l=>s.setTimeout(()=>{r.hideTaskDropdown(c)},200),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white text-sm",placeholder:"Select or type task"},null,40,be),[[p,o.task]]),o.showTaskDropdown?(m(),d("div",ve,[(m(!0),d(f,null,b(r.filteredTasks(o.task),l=>(m(),d("div",{key:l.name,onMousedown:Xe=>r.selectTask(c,l),class:"px-3 py-2 text-sm text-white hover:bg-[#2a4a58] cursor-pointer border-b border-[#2a4a58] last:border-b-0"},[t("div",ye,a(l.subject),1),t("div",we,a(l.status)+" • "+a(l.project||"No Project"),1)],40,Te))),128)),r.filteredTasks(o.task).length===0?(m(),d("div",xe," No tasks found ")):u("",!0)])):u("",!0)])]),t("div",_e,[h(t("input",{type:"datetime-local","onUpdate:modelValue":l=>o.from_time=l,onChange:l=>r.updateLogHours(c),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white text-sm"},null,40,ke),[[p,o.from_time]])]),t("div",Ce,[h(t("input",{type:"datetime-local","onUpdate:modelValue":l=>o.to_time=l,onChange:l=>r.updateLogHours(c),class:"w-full px-3 py-2 border border-[#2a4a58] rounded-md focus:outline-none focus:ring-2 focus:ring-[#8acc33] focus:border-transparent bg-[#233d48] text-white text-sm"},null,40,Se),[[p,o.to_time]])]),t("div",De,[t("div",Fe,a(o.hours||"0.00"),1)]),t("div",Re,[t("button",{onClick:l=>r.removeTimeLog(c),class:"text-red-400 hover:text-red-300 transition-colors"},[...e[32]||(e[32]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ee)])]))),128))])]),t("div",Me,[t("div",je,[t("div",Ne,[t("button",{onClick:e[14]||(e[14]=(...o)=>r.addTimeLog&&r.addTimeLog(...o)),class:"px-6 py-3 border-2 border-dashed border-[#8acc33] text-[#8acc33] bg-transparent hover:bg-[#2a4a58] font-medium rounded-lg transition-colors duration-200 flex items-center"},[...e[34]||(e[34]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Add Time Entry ",-1)])]),t("button",{onClick:e[15]||(e[15]=(...o)=>r.startTimer&&r.startTimer(...o)),disabled:i.timer.isRunning,class:v(["px-6 py-3 font-medium rounded-lg transition-colors duration-200 flex items-center",i.timer.isRunning?"bg-gray-500 cursor-not-allowed":"bg-[#8acc33] hover:bg-[#7abc22] text-white"])},[e[35]||(e[35]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+a(i.timer.isRunning?"Timer Running":"Start Timer"),1)],10,Le)]),t("div",Ae,[t("div",Ue,"Total Hours: "+a(r.totalHours),1),t("div",Pe,a(((x=i.currentTimesheet.time_logs)==null?void 0:x.length)||0)+" entries",1)])])])])]),i.showTimerModal&&i.timer.isRunning?(m(),d("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e[19]||(e[19]=o=>i.showTimerModal=!1)},[t("div",{class:"bg-[#233d48] rounded-lg shadow-xl w-full max-w-md border border-[#2a4a58]",onClick:e[18]||(e[18]=C(()=>{},["stop"]))},[e[38]||(e[38]=t("div",{class:"p-6 border-b border-[#2a4a58] bg-[#2a4a58]"},[t("h3",{class:"text-xl font-semibold text-white"},"Time Tracking Active")],-1)),t("div",Oe,[t("div",Ve,a(i.timer.displayTime),1),t("div",ze,[t("div",null,[e[36]||(e[36]=t("div",{class:"text-sm text-gray-300"},"Started",-1)),t("div",He,a(i.timer.startTimeDisplay),1)]),t("div",null,[e[37]||(e[37]=t("div",{class:"text-sm text-gray-300"},"Activity Type",-1)),t("div",Be,a(i.timer.activity_type),1)])]),t("div",Ie,[t("button",{onClick:e[16]||(e[16]=(...o)=>r.stopTimerAndAddLog&&r.stopTimerAndAddLog(...o)),class:"px-6 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-md transition-colors duration-200"}," Stop & Add Entry "),t("button",{onClick:e[17]||(e[17]=o=>i.showTimerModal=!1),class:"px-6 py-2 border border-[#8acc33] text-[#8acc33] bg-transparent hover:bg-[#2a4a58] font-medium rounded-md transition-colors duration-200"}," Minimize ")])])])])):u("",!0)])}const We=k(D,[["render",Je],["__scopeId","data-v-7f1f7e60"]]);export{We as default};
//# sourceMappingURL=Timesheets-364b1268.js.map
