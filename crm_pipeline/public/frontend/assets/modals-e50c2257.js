import{r as C,b as U,w as me,br as P,d as W,$ as se,bv as Ae,bt as be,j as D,bp as Y,z as ce,k as ye,bm as Z,bw as Oe,F as ie,bl as xe,aG as we,i as ee,bP as ve,bH as ne,bx as M,bB as ae,bG as Te,by as Re,bz as H,bA as F,x as fe,l as $,C as L,D as T,m as R,B as _e,L as A,n as E,E as Q,M as j,p as V,a9 as Ee,q,aE as Ie,N as ue,J as Me,K as Fe,I as z,R as le,S as oe,a as Se,aS as Be,aV as N,c1 as je,aT as Le,aN as Ne,X as Ve,U as Ce,G as $e,H as ke,bj as ze,a6 as qe,a7 as Ke,a8 as Ge,aW as He,Y as Ue,aO as pe,a4 as he,V as We,cz as Qe,aP as Ye,_ as Je}from"./index-f283a836.js";import{g as Pe}from"./global-490945aa.js";import{d as re,P as Xe,Q as Ze,R as et}from"./UserAvatar-0be15b99.js";import{s as tt,a as at}from"./DragVerticalIcon-2abb2b05.js";function ge(e,t){if(e)return e;let s=t??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function nt(e,t){let s=C(ge(e.value.type,e.value.as));return U(()=>{s.value=ge(e.value.type,e.value.as)}),me(()=>{var f;s.value||P(t)&&P(t)instanceof HTMLButtonElement&&!((f=P(t))!=null&&f.hasAttribute("type"))&&(s.value="button")}),s}let rt=W({props:{onFocus:{type:Function,required:!0}},setup(e){let t=C(!0);return()=>t.value?se(be,{as:"button",type:"button",features:Ae.Focusable,onFocus(s){s.preventDefault();let f,d=50;function l(){var c;if(d--<=0){f&&cancelAnimationFrame(f);return}if((c=e.onFocus)!=null&&c.call(e)){t.value=!1,cancelAnimationFrame(f);return}f=requestAnimationFrame(l)}f=requestAnimationFrame(l)}}):null}});var st=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(st||{}),lt=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(lt||{});let De=Symbol("TabsContext");function te(e){let t=ee(De,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,te),s}return t}let de=Symbol("TabsSSRContext"),ot=W({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:s,emit:f}){var d;let l=C((d=e.selectedIndex)!=null?d:e.defaultIndex),c=C([]),o=C([]),x=D(()=>e.selectedIndex!==null),S=D(()=>x.value?e.selectedIndex:l.value);function b(r){var v;let i=Y(n.tabs.value,P),p=Y(n.panels.value,P),I=i.filter(y=>{var a;return!((a=P(y))!=null&&a.hasAttribute("disabled"))});if(r<0||r>i.length-1){let y=ne(l.value===null?0:Math.sign(r-l.value),{[-1]:()=>1,0:()=>ne(Math.sign(r),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),a=ne(y,{0:()=>i.indexOf(I[0]),1:()=>i.indexOf(I[I.length-1])});a!==-1&&(l.value=a),n.tabs.value=i,n.panels.value=p}else{let y=i.slice(0,r),a=[...i.slice(r),...y].find(u=>I.includes(u));if(!a)return;let h=(v=i.indexOf(a))!=null?v:n.selectedIndex.value;h===-1&&(h=n.selectedIndex.value),l.value=h,n.tabs.value=i,n.panels.value=p}}let n={selectedIndex:D(()=>{var r,v;return(v=(r=l.value)!=null?r:e.defaultIndex)!=null?v:null}),orientation:D(()=>e.vertical?"vertical":"horizontal"),activation:D(()=>e.manual?"manual":"auto"),tabs:c,panels:o,setSelectedIndex(r){S.value!==r&&f("change",r),x.value||b(r)},registerTab(r){var v;if(c.value.includes(r))return;let i=c.value[l.value];if(c.value.push(r),c.value=Y(c.value,P),!x.value){let p=(v=c.value.indexOf(i))!=null?v:l.value;p!==-1&&(l.value=p)}},unregisterTab(r){let v=c.value.indexOf(r);v!==-1&&c.value.splice(v,1)},registerPanel(r){o.value.includes(r)||(o.value.push(r),o.value=Y(o.value,P))},unregisterPanel(r){let v=o.value.indexOf(r);v!==-1&&o.value.splice(v,1)}};ce(De,n);let g=C({tabs:[],panels:[]}),w=C(!1);U(()=>{w.value=!0}),ce(de,D(()=>w.value?null:g.value));let _=D(()=>e.selectedIndex);return U(()=>{ye([_],()=>{var r;return b((r=e.selectedIndex)!=null?r:e.defaultIndex)},{immediate:!0})}),me(()=>{if(!x.value||S.value==null||n.tabs.value.length<=0)return;let r=Y(n.tabs.value,P);r.some((v,i)=>P(n.tabs.value[i])!==P(v))&&n.setSelectedIndex(r.findIndex(v=>P(v)===P(n.tabs.value[S.value])))}),()=>{let r={selectedIndex:l.value};return se(ie,[c.value.length<=0&&se(rt,{onFocus:()=>{for(let v of c.value){let i=P(v);if((i==null?void 0:i.tabIndex)===0)return i.focus(),!0}return!1}}),Z({theirProps:{...s,...Oe(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:r,slots:t,attrs:s,name:"TabGroup"})])}}}),it=W({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:s}){let f=te("TabList");return()=>{let d={selectedIndex:f.selectedIndex.value},l={role:"tablist","aria-orientation":f.orientation.value};return Z({ourProps:l,theirProps:e,slot:d,attrs:t,slots:s,name:"TabList"})}}}),ut=W({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:s,expose:f}){var d;let l=(d=e.id)!=null?d:`headlessui-tabs-tab-${xe()}`,c=te("Tab"),o=C(null);f({el:o,$el:o}),U(()=>c.registerTab(o)),we(()=>c.unregisterTab(o));let x=ee(de),S=D(()=>{if(x.value){let p=x.value.tabs.indexOf(l);return p===-1?x.value.tabs.push(l)-1:p}return-1}),b=D(()=>{let p=c.tabs.value.indexOf(o);return p===-1?S.value:p}),n=D(()=>b.value===c.selectedIndex.value);function g(p){var I;let y=p();if(y===ae.Success&&c.activation.value==="auto"){let a=(I=Re(o))==null?void 0:I.activeElement,h=c.tabs.value.findIndex(u=>P(u)===a);h!==-1&&c.setSelectedIndex(h)}return y}function w(p){let I=c.tabs.value.map(y=>P(y)).filter(Boolean);if(p.key===M.Space||p.key===M.Enter){p.preventDefault(),p.stopPropagation(),c.setSelectedIndex(b.value);return}switch(p.key){case M.Home:case M.PageUp:return p.preventDefault(),p.stopPropagation(),g(()=>H(I,F.First));case M.End:case M.PageDown:return p.preventDefault(),p.stopPropagation(),g(()=>H(I,F.Last))}if(g(()=>ne(c.orientation.value,{vertical(){return p.key===M.ArrowUp?H(I,F.Previous|F.WrapAround):p.key===M.ArrowDown?H(I,F.Next|F.WrapAround):ae.Error},horizontal(){return p.key===M.ArrowLeft?H(I,F.Previous|F.WrapAround):p.key===M.ArrowRight?H(I,F.Next|F.WrapAround):ae.Error}}))===ae.Success)return p.preventDefault()}let _=C(!1);function r(){var p;_.value||(_.value=!0,!e.disabled&&((p=P(o))==null||p.focus({preventScroll:!0}),c.setSelectedIndex(b.value),Te(()=>{_.value=!1})))}function v(p){p.preventDefault()}let i=nt(D(()=>({as:e.as,type:t.type})),o);return()=>{var p,I;let y={selected:n.value,disabled:(p=e.disabled)!=null?p:!1},{...a}=e,h={ref:o,onKeydown:w,onMousedown:v,onClick:r,id:l,role:"tab",type:i.value,"aria-controls":(I=P(c.panels.value[b.value]))==null?void 0:I.id,"aria-selected":n.value,tabIndex:n.value?0:-1,disabled:e.disabled?!0:void 0};return Z({ourProps:h,theirProps:a,slot:y,attrs:t,slots:s,name:"Tab"})}}}),ct=W({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:s}){let f=te("TabPanels");return()=>{let d={selectedIndex:f.selectedIndex.value};return Z({theirProps:e,ourProps:{},slot:d,attrs:s,slots:t,name:"TabPanels"})}}}),ft=W({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:t,slots:s,expose:f}){var d;let l=(d=e.id)!=null?d:`headlessui-tabs-panel-${xe()}`,c=te("TabPanel"),o=C(null);f({el:o,$el:o}),U(()=>c.registerPanel(o)),we(()=>c.unregisterPanel(o));let x=ee(de),S=D(()=>{if(x.value){let g=x.value.panels.indexOf(l);return g===-1?x.value.panels.push(l)-1:g}return-1}),b=D(()=>{let g=c.panels.value.indexOf(o);return g===-1?S.value:g}),n=D(()=>b.value===c.selectedIndex.value);return()=>{var g;let w={selected:n.value},{tabIndex:_,...r}=e,v={ref:o,id:l,role:"tabpanel","aria-labelledby":(g=P(c.tabs.value[b.value]))==null?void 0:g.id,tabIndex:n.value?_:-1};return!n.value&&e.unmount&&!e.static?se(be,{as:"span","aria-hidden":!0,...v}):Z({ourProps:v,theirProps:r,slot:w,attrs:t,slots:s,features:ve.Static|ve.RenderStrategy,visible:n.value,name:"TabPanel"})}}});const dt={__name:"TabList",setup(e){const t=ee("tab"),s=C([]),f=C(null),d=D(()=>{var o;return(o=t.value.tabs.value)==null?void 0:o.length}),l=C("");function c(o){o>=d.value&&(o=d.value-1);const x=s.value[o].el;t.value.vertical.value?(f.value.style.height=`${x.offsetHeight}px`,f.value.style.top=`${x.offsetTop}px`):(f.value.style.width=`${x.offsetWidth}px`,f.value.style.left=`${x.offsetLeft}px`)}return ye(()=>t.value.tabIndex.value,o=>{o>=d.value&&(t.value.tabIndex.value=d.value-1),l.value="transition-all duration-300 ease-in-out",fe(()=>c(o))}),U(()=>{fe(()=>c(t.value.tabIndex.value)),setTimeout(()=>c(t.value.tabIndex.value),100)}),(o,x)=>($(),L(A(it),{class:V(["relative flex",A(t).vertical?"flex-col border-r overflow-y-auto":"gap-7.5 border-b overflow-x-auto items-center px-5"])},{default:T(()=>[($(!0),R(ie,null,_e(A(t).tabs,(S,b)=>($(),L(A(ut),{ref_for:!0,ref_key:"tabRef",ref:s,as:"template",key:b,class:"focus:outline-none focus:transition-none"},{default:T(({selected:n})=>[E(o.$slots,"default",Q({ref_for:!0},{tab:S,selected:n}),()=>[j("button",{class:V(["flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9",[n?"text-ink-gray-9":"",A(t).vertical?"py-2.5 px-4 border-r border-transparent hover:border-outline-gray-3":"py-3 border-b border-transparent hover:border-outline-gray-3"]])},[S.icon?($(),L(Ee(S.icon),{key:0,class:"size-4"})):q("",!0),Ie(" "+ue(S.label),1)],2)])]),_:2},1024))),128)),j("div",{ref_key:"indicator",ref:f,class:V(["tab-indicator absolute bg-surface-gray-7",[A(t).vertical?"right-0 w-px":"bottom-0 h-px",l.value]])},null,2)]),_:3},8,["class"]))}},vt={__name:"TabPanel",setup(e){const t=ee("tab");return(s,f)=>($(),L(A(ct),{class:"flex flex-1 overflow-hidden"},{default:T(()=>[($(!0),R(ie,null,_e(A(t).tabs,(d,l)=>($(),L(A(ft),{class:"flex flex-1 flex-col overflow-y-auto focus:outline-none",key:l},{default:T(()=>[E(s.$slots,"default",Q({ref_for:!0},{tab:d}))]),_:2},1024))),128))]),_:3}))}},At={__name:"Tabs",props:Me({as:{type:String,default:"template"},tabs:{type:Array,required:!0},vertical:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,s=Fe(e,"modelValue");return ce("tab",D(()=>({tabIndex:s,tabs:t.tabs,vertical:t.vertical}))),(f,d)=>($(),L(A(ot),Q(e.as!=="template"?{as:e.as,class:["flex flex-1 overflow-hidden",e.vertical?"":"flex-col "]}:{},{defaultIndex:s.value,selectedIndex:s.value,onChange:d[0]||(d[0]=l=>s.value=l)}),{default:T(()=>[E(f.$slots,"default",{},()=>[z(dt,null,{default:T(({tab:l,selected:c})=>[E(f.$slots,"tab-item",le(oe({tab:l,selected:c})))]),_:3}),z(vt,null,{default:T(({tab:l})=>[E(f.$slots,"tab-panel",le(oe({tab:l})))]),_:3})])]),_:3},16,["defaultIndex","selectedIndex"]))}},J=Se({});function pt(e,t="Form"){const s=Be({doctype:"CRM Form Script",cache:["Form Scripts",e,t],fields:["name","dt","view","script"],filters:{view:t,dt:e,enabled:1},onSuccess:b=>{for(let n of b)J[e]||(J[e]={}),J[e][n.name]=n||{}},onError:b=>{console.error(`Error loading CRM Form Scripts for ${e} (view: ${t}):`,b)}});!J[e]&&!s.loading&&s.fetch();async function f(b,n={}){await s.list.promise;let g=J[e];if(!g||Object.keys(g).length===0)return null;const{$dialog:w,$socket:_}=Pe();return n.createDialog=w,n.toast=N,n.socket=_,n.router=je,n.call=Le,n.throwError=r=>{throw N.error(r||__("An error occurred")),new Error(r||__("An error occurred"))},d(g,b,n)}function d(b,n,g){var r;const w=[];let _=null;for(let v in b){let i=(r=b[v])==null?void 0:r.script;if(i)try{const p=o(i);if(!p)continue;p.forEach(I=>{const y=x(i,I,g);if(!y)return;let a=null,h=e.replace(/\s+/g,""),{doctypeMeta:u}=re(e),m=I!==h;if(m){if(!w.length){console.error(__("⚠️ No class found for doctype: {0}, it is mandatory to have a class for the parent doctype. it can be empty, but it should be present.",[e]));return}a=w[_]}else _=w.length||0;const k=l(y,u,n,a,m);w.push(k)})}catch(p){console.error(__("Failed to load form controller: {0}",[p]))}}return w}function l(b,n,g,w=null,_=!1){g.actions=g.actions||[],g.statuses=g.statuses||[];let r=new b;r._originalDocumentContext=g,r._isChildDoctype=_;for(const i in g)g.hasOwnProperty(i)&&(r[i]=g[i]);r.getMeta=async i=>(n[i]||await re(i),n[i]);const v=()=>g.doc;return _?(r.doc=S(v,w,r),w._childInstances||(w._childInstances=[]),w._childInstances.push(r)):r.doc=S(v,r),r}function c(b){typeof b.prototype.getRow!="function"&&(b.prototype.getRow=function(n,g){var r,v;g=g||this.currentRowIdx;let w=null;if(this instanceof Array){const{getFields:i}=re(this.doc.doctype);let I=i().find(y=>y.fieldname===n);w=(r=I==null?void 0:I.options)==null?void 0:r.replace(/\s+/g,""),!g&&w&&(g=(v=this.find(y=>y.constructor.name===w))==null?void 0:v.currentRowIdx)}if(!this.doc[n])return console.warn(__("⚠️ No data found for parent field: {0}",[n])),null;const _=this.doc[n].find(i=>i.idx===g);return _?(_.parent=_.parent||this.doc.name,this instanceof Array&&w?S(_,this.find(i=>i.constructor.name===w)):S(_,this)):(console.warn(__("⚠️ No row found for idx: {0} in parent field: {1}",[g,n])),null)}),Object.prototype.hasOwnProperty.call(b.prototype,"actions")||Object.defineProperty(b.prototype,"actions",{configurable:!0,enumerable:!0,get(){return this._originalDocumentContext?this._originalDocumentContext.actions:(console.warn("CRM Script: _originalDocumentContext not found on instance for actions getter."),[])},set(n){if(!this._originalDocumentContext){console.warn("CRM Script: _originalDocumentContext not found on instance for actions setter.");return}if(!Array.isArray(n)){console.warn('CRM Script: "actions" property must be an array. Value was not set.',n),this._originalDocumentContext.actions=[];return}this._originalDocumentContext.actions=n}}),Object.prototype.hasOwnProperty.call(b.prototype,"statuses")||Object.defineProperty(b.prototype,"statuses",{configurable:!0,enumerable:!0,get(){return this._originalDocumentContext?this._originalDocumentContext.statuses:(console.warn("CRM Script: _originalDocumentContext not found on instance for statuses getter."),[])},set(n){if(!this._originalDocumentContext){console.warn("CRM Script: _originalDocumentContext not found on instance for statuses setter.");return}if(!Array.isArray(n)){console.warn('CRM Script: "statuses" property must be an array. Value was not set.',n),this._originalDocumentContext.statuses=[];return}this._originalDocumentContext.statuses=n}})}function o(b){return[...b.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").matchAll(/class\s+([A-Za-z0-9_]+)/g)].map(g=>g[1])||[]}function x(b,n,g={}){const w=Object.keys(g),_=Object.values(g),r=`
		${b}
		return ${n};
	`,v=new Function(...w,r)(..._);return c(v),v}function S(b,n,g=null){const w=typeof b=="function",_=()=>w?b():b;return new Proxy({},{get(r,v){const i=_();if(i)return v==="trigger"?(i&&"trigger"in i&&console.warn(__('⚠️ Avoid using "trigger" as a field name — it conflicts with the built-in trigger() method.')),(p,...I)=>{const y=n[p];if(typeof y=="function")return y.apply(n,I);console.warn(__('⚠️ Method "{0}" not found in class.',[p]))}):v==="getRow"?n.getRow.bind(g||n._childInstances||n):i[v]},set(r,v,i){const p=_();return p?(p[v]=i,!0):!1},has(r,v){const i=_();return i?v in i:!1},ownKeys(r){const v=_();return v?Reflect.ownKeys(v):[]},getOwnPropertyDescriptor(r,v){const i=_();if(i)return Reflect.getOwnPropertyDescriptor(i,v)}})}return{scripts:s,setupScript:f,setupFormController:l}}const B={},K={},X={};function Ot(e,t){const{setupScript:s,scripts:f}=pt(e),d=re(e);B[e]=B[e]||{};const l=C("");B[e][t||""]||(t?B[e][t]=Ne({doctype:e,name:t,onSuccess:async()=>await c(),onError:a=>{l.value=a,a.exc_type==="DoesNotExistError"&&N.error(__(a.messages[0]||"Document does not exist")),a.exc_type==="PermissionError"&&N.error(__(a.messages[0]||"You do not have permission to access this document"))},setValue:{validate:x,onSuccess:()=>{g(),N.success(__("Document updated successfully"))},onError:a=>{var h,u;if(w(),a.exc_type=="MandatoryError"){const m=a.messages.map(k=>{let O=k.split(": ");return O[O.length-1].trim()}).join(", ");N.error(__("Mandatory field error: {0}",[m]));return}(h=a.messages)==null||h.forEach(m=>{N.error(m)}),((u=a.messages)==null?void 0:u.length)===0&&N.error(__("An error occurred while updating the document")),console.error(a)}}}):(B[e][""]=Se({doc:{}}),c())),X[e]=X[e]||{},X[e][t||""]||(X[e][t||""]=Ve({url:"crm.api.doc.get_assigned_users",cache:`assignees:${e}:${t}`,auto:!!t,params:{doctype:e,name:t},transform:a=>Xe(a)}));async function c(){if(K[e]&&typeof K[e][t||""]=="object")return;K[e]||(K[e]={}),K[e][t||""]={};const{makeCall:a}=Pe();let h={};h.crm={makePhoneCall:a,openSettings:k=>{tt.value=!0,at.value=k}};const u=await s(B[e][t||""],h);if(!u||u.length===0)return;const m={};for(const k of u){const O=k.constructor.name;m[O]||(m[O]=[]),m[O].push(k)}K[e][t||""]=m,b()}function o(a=null){var k;const u=((a==null?void 0:a.doctype)||e).replace(/\s+/g,""),m=(k=K[e])==null?void 0:k[t||""];return typeof m=="object"&&m!==null&&!Array.isArray(m)?m[u]||[]:[]}function x(a){S(a.doc||a.fieldname)}function S(a){let h=(d==null?void 0:d.getFields())||[];if(!h||h.length===0)return;let u=[];if(h.forEach(m=>{var O;let k=((O=d==null?void 0:d.doctypeMeta)==null?void 0:O[m.parent])||null;if(Ze(m.mandatory_depends_on,a,k)){const G=a[m.fieldname];(G==null||typeof G=="string"&&G.trim()===""||Array.isArray(G)&&G.length===0)&&u.push(m.label||m.fieldname)}}),u.length>0)throw N.error(__("Mandatory fields required: {0}",[u.join(", ")])),new Error(__("Mandatory fields required: {0}",[u.join(", ")]))}async function b(){await y(async function(){var h,u,m;await(((h=this.onLoad)==null?void 0:h.call(this))||((u=this.on_load)==null?void 0:u.call(this))||((m=this.onload)==null?void 0:m.call(this)))})}async function n(){const a=Array.from(arguments);await y(async function(){var u,m;await(((u=this.onBeforeCreate)==null?void 0:u.call(this,...a))||((m=this.on_before_create)==null?void 0:m.call(this,...a)))})}async function g(){await y(async function(){var h,u;await(((h=this.onSave)==null?void 0:h.call(this))||((u=this.on_save)==null?void 0:u.call(this)))})}async function w(){await y(async function(){var h,u;await(((h=this.onError)==null?void 0:h.call(this))||((u=this.on_error)==null?void 0:u.call(this)))})}async function _(){await y(async function(){var h;await((h=this.refresh)==null?void 0:h.call(this))})}async function r(a,h,u){let m=null;u?(m=u[a],u[a]=h):(m=B[e][t||""].doc[a],B[e][t||""].doc[a]=h);const k=async function(){var O;this.value=h,this.oldValue=m,u&&(this.currentRowIdx=u.idx),await((O=this[a])==null?void 0:O.call(this))};try{await y(k,u)}catch(O){throw u?u[a]=m:B[e][t||""].doc[a]=m,console.error(k),O}}async function v(a){await y(async function(){var u;this.currentRowIdx=a.idx,this.value=a,await((u=this[a.parentfield+"_add"])==null?void 0:u.call(this))},a)}async function i(a,h){await y(async function(){var m;if(a.size===1){const k=Array.from(a)[0];this.currentRowIdx=h.find(O=>O.name===k).idx}else delete this.currentRowIdx;this.selectedRows=Array.from(a),this.rows=h,await((m=this[h[0].parentfield+"_remove"])==null?void 0:m.call(this))},h[0])}async function p(){const a=Array.from(arguments);await y(async function(){var u,m;await(((u=this.onCreateLead)==null?void 0:u.call(this,...a))||((m=this.on_create_lead)==null?void 0:m.call(this,...a)))})}async function I(){const a=Array.from(arguments);await y(async function(){var u,m;await(((u=this.convertToDeal)==null?void 0:u.call(this,...a))||((m=this.convert_to_deal)==null?void 0:m.call(this,...a)))})}async function y(a,h=null){const u=o(h);if(!u.length)return;const m=u.map(k=>async()=>await a.call(k));await et(m)}return{document:B[e][t||""],assignees:X[e][t||""],scripts:f,error:l,validate:x,getControllers:o,triggerOnLoad:b,triggerOnBeforeCreate:n,triggerOnSave:g,triggerOnError:w,triggerOnRefresh:_,triggerOnChange:r,triggerOnRowAdd:v,triggerOnRowRemove:i,setupFormScript:c,triggerOnCreateLead:p,triggerConvertToDeal:I}}const ht={inheritAttrs:!1},Tt=Object.assign(ht,{__name:"Section",props:{label:{type:String,default:""},hideLabel:{type:Boolean,default:!1},opened:{type:Boolean,default:!0},collapsible:{type:Boolean,default:!0},collapseIconPosition:{type:String,default:"left"},labelClass:{type:[String,Object,Array],default:""},headerClass:{type:[String,Object,Array],default:""}},setup(e){const t=e,s=C(t.hideLabel),f=C(t.opened);function d(){f.value=!f.value}function l(){f.value=!0}function c(){f.value=!1}return(o,x)=>{const S=Ce("FeatherIcon");return $(),R("div",null,[E(o.$slots,"header",le(oe({opened:f.value,hide:s.value,open:l,close:c,toggle:d})),()=>[s.value?q("",!0):($(),R("div",{key:0,class:V(["section-header flex items-center justify-between",e.headerClass])},[j("div",{class:V(["flex text-ink-gray-9 max-w-fit cursor-pointer items-center gap-2 text-base",e.labelClass]),onClick:x[0]||(x[0]=b=>e.collapsible&&d())},[e.collapsible&&e.collapseIconPosition==="left"?($(),L(S,{key:0,name:"chevron-right",class:V(["h-4 transition-all duration-300 ease-in-out",{"rotate-90":f.value}])},null,8,["class"])):q("",!0),j("span",null,ue(o.__(e.label)||o.__("Untitled")),1),e.collapsible&&e.collapseIconPosition==="right"?($(),L(S,{key:1,name:"chevron-right",class:V(["h-4 transition-all duration-300 ease-in-out",{"rotate-90":f.value}])},null,8,["class"])):q("",!0)],2),E(o.$slots,"actions")],2))]),z(ze,{"enter-active-class":"duration-300 ease-in","leave-active-class":"duration-300 ease-[cubic-bezier(0, 1, 0.5, 1)]","enter-to-class":"max-h-[200px] overflow-hidden","leave-from-class":"max-h-[200px] overflow-hidden","enter-from-class":"max-h-0 overflow-hidden","leave-to-class":"max-h-0 overflow-hidden"},{default:T(()=>[$e(j("div",Q({class:"columns"},o.$attrs),[E(o.$slots,"default",le(oe({opened:f.value,open:l,close:c,toggle:d})))],16),[[ke,f.value]])]),_:3})])}}}),gt={key:0},mt={key:1},bt={key:1},yt={key:2},xt={__name:"KeyboardShortcut",props:{meta:Boolean,ctrl:Boolean,shift:Boolean,alt:Boolean,shortcut:String,bg:Boolean},setup(e){const t=navigator.userAgent.includes("Mac");return(s,f)=>($(),R("div",{class:V(["inline-flex items-center gap-0.5 text-sm",{"bg-surface-gray-2 rounded-sm text-ink-gray-5 py-0.5 px-1":e.bg,"text-ink-gray-4":!e.bg}])},[e.ctrl||e.meta?($(),R("span",gt,[A(t)?($(),L(A(qe),{key:0,class:"w-3 h-3"})):($(),R("span",mt,"Ctrl"))])):q("",!0),e.shift?($(),R("span",bt,[z(A(Ke),{class:"w-3 h-3"})])):q("",!0),e.alt?($(),R("span",yt,[z(A(Ge),{class:"w-3 h-3"})])):q("",!0),E(s.$slots,"default")],2))}},wt={class:"rounded bg-surface-gray-7 py-1.5 px-2 text-xs text-ink-white shadow-xl"},_t={class:"flex items-center gap-1"},Rt={__name:"Password",props:{modelValue:{type:[String,Number],default:""},value:{type:[String,Number],default:""}},setup(e){const t=e,s=C(!1),f=D(()=>{let d=t.modelValue||t.value;return!(d!=null&&d.includes("*"))});return(d,l)=>{const c=Ce("FeatherIcon");return $(),L(A(We),Q({type:s.value?"text":"password",value:e.modelValue||e.value},d.$attrs,{onKeydown:[l[1]||(l[1]=pe(he(o=>s.value=!s.value,["meta","prevent"]),["i"])),l[2]||(l[2]=pe(he(o=>s.value=!s.value,["ctrl","prevent"]),["i"]))]}),He({suffix:T(()=>[z(A(Ue),null,{body:T(()=>[j("div",wt,[j("span",_t,[Ie(ue(s.value?d.__("Hide Password"):d.__("Show Password"))+" ",1),z(xt,{bg:"",ctrl:"",class:"!bg-surface-gray-5 !text-ink-gray-2 px-1"},{default:T(()=>[...l[3]||(l[3]=[j("span",{class:"font-mono leading-none tracking-widest"},"+I",-1)])]),_:1})])])]),default:T(()=>[j("div",null,[$e(z(c,{name:s.value?"eye-off":"eye",class:"h-3 cursor-pointer mr-1",onClick:l[0]||(l[0]=o=>s.value=!s.value)},null,8,["name"]),[[ke,f.value]])])]),_:1})]),_:2},[d.$slots.prefix?{name:"prefix",fn:T(()=>[E(d.$slots,"prefix")]),key:"0"}:void 0]),1040,["type","value"])}}},Et={__name:"FormattedInput",props:{value:{type:[String,Number],default:""},formattedValue:{type:[String,Number],default:""}},setup(e){const t=e,s=Qe(),f=C(!1),d=C(null);function l(){f.value=!0,fe(()=>{var x;d.value&&((x=d.value.el)==null||x.select())})}const c=D(()=>f.value?t.value:t.formattedValue||t.value),o=D(()=>[{sm:"text-xs",md:"text-base"}[s.size||"sm"],"text-ink-gray-5"]);return(x,S)=>($(),R(ie,null,[z(A(Ye),Q({ref_key:"inputRef",ref:d,value:c.value,onFocus:l,onBlur:S[0]||(S[0]=b=>f.value=!1)},x.$attrs),null,16,["value"]),E(x.$slots,"description",{},()=>[A(s).description?($(),R("p",{key:0,class:V(["mt-1.5",o.value])},ue(A(s).description),3)):q("",!0)])],64))}},It={},St={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ct(e,t){return $(),R("svg",St,[...t[0]||(t[0]=[j("circle",{cx:"8",cy:"8",r:"4.5",fill:"transparent",stroke:"currentColor","stroke-width":"3"},null,-1)])])}const Mt=Je(It,[["render",Ct]]),Ft=C(!1),Bt=C({}),jt=C(!1),Lt=C({}),Nt=C(!1),Vt=C(!1);export{Mt as I,At as _,Lt as a,Tt as b,Ft as c,dt as d,vt as e,Et as f,Rt as g,Vt as h,Nt as i,Bt as q,jt as s,Ot as u};
//# sourceMappingURL=modals-e50c2257.js.map
